function display(time, value = 'time', m = true) {
    let result = '';

    if (time <= 60) {
        result = Math.floor(time) + ' сек';
    } else if (time <= 3600) {
        const minutes = Math.floor(time / 60);
        const seconds = Math.floor(time % 60);

        result = minutes + ' мин.' + (m && seconds > 0 ? ' ' + seconds + ' сек.' : '');
    } else if (time <= 86400) {
        const hours = Math.floor(time / 3600);
        const minutes = Math.floor((time % 3600) / 60);

        result = hours + ' час.' + (m && minutes > 0 ? ' ' + minutes + ' мин.' : '');
    } else if (time <= 2629743) {
        const days = Math.floor(time / 86400);

        result = days + ' д.' + (m ? ' ' + Math.floor((time % 86400) / 3600) + ' час.' : '');
    } else if (time <= 31536000) {
        const months = Math.floor(time / 2629743);

        result = months + ' мес';
    } else {
        const years = Math.floor(time / 31536000);

        result = years + ' г';
    }

    return value === 'time' ? result : (time < 60 ? '1' : Math.ceil(time / 120));
}

function updateTimer(stashValue, id = 1, timeInfo = true) {
    setInterval(function() {
        const timeString = display(stashValue - Math.floor(Date.now() / 1000), 'time', timeInfo); // Получение отформатированного времени

        const currentTime = Math.floor(Date.now() / 1000); // Текущее время в секундах
        const timeRemaining = stashValue - currentTime;

        document.getElementById('timeDisplay-' + id).textContent = timeRemaining <= 0 ? 0 + ' сек.' : timeString;
    }, 500);
}


function updateTimerHead() {
    var timerElements = document.querySelectorAll('[data-timer-id]');

    for (var i = 0; i < timerElements.length; i++) {
        var timerElement = timerElements[i];
        var timerID = timerElement.dataset.timerId;
        var timeParts = timerElement.innerText.split(':');
        var minutes = parseInt(timeParts[0]);
        var seconds = parseInt(timeParts[1]);

        if (minutes === 0 && seconds === 0) {
            clearInterval(timerInterval);
            return;
        }

        if (seconds === 0) {
            minutes--;
            seconds = 59;
        } else {
            seconds--;
        }

        var newTime = minutes.toString().padStart(2, '0') + ':' + seconds.toString().padStart(2, '0');
        timerElement.innerText = newTime;
    }
}

var timerInterval = setInterval(updateTimerHead, 1000);